
</textarea>

<div class="buttons">
  <input type="button" id="load" value="&darr; Load" title="Load data from textarea into the Timeline" style="display: none;">
  <input type="button" id="save" value="&uarr; Save" title="Save data from the Timeline into the textarea" style="display: none;">
</div>

<div id="hoveredItem"></div>
<div id="log"></div>

  <div id="hoveredItem"></div>
<div id="visualization">
  <div>
      <input type="button" id="Play" value="Play"/>
      <input type="button" id="Pause" value="Pause"/>
  </div>
  <p></p>
  <div>
        <input type="button" id="Backwards" value="<<"/>
        <input type="button" id="x2" value="x2"/>
        <input type="button" id="x4" value="x4"/>
        <input type="button" id="x8" value="x8"/>
        <input type="button" id="x16" value="x16"/>
        <input type="button" id="x32" value="x32"/>
        <input type="button" id="x64" value="x64"/>
        <input type="button" id="Forwards" value=">>"/>
  </div>
</div>
<p></p>
<div id="images"></div>

<script>
  var txtData = document.getElementById('data');
  var btnLoad = document.getElementById('load');
  var btnSave = document.getElementById('save');

  // Create an empty DataSet.
  // This DataSet is used for two way data binding with the Timeline.
  var items = new vis.DataSet();
  // create a timeline
  var container = document.getElementById('visualization');
  var options = {
    start: '2016-08-11',
    editable: false
  };
  <!--group names start here. Do not delete this comment.-->
  var groups = new vis.DataSet();
  var groupCount = names.length;
  for (var g = 0; g < groupCount; g++) {
    groups.add({id: g, content: names[g]});
  }

  var timeline = new vis.Timeline(container, items, options);
  timeline.setGroups(groups);

  var click_screenshoot = new Image();
  var div = document.getElementById('images');


  timeline.on('itemover', function (properties) {
    logEvent('itemover', properties);
    click_screenshoot.src = items.get(properties.item).click_image
    div.appendChild(click_screenshoot);
  });
  timeline.on('select', function (properties) {
    setHoveredItem("pepe");
    logEvent('select', properties);
    click_screenshoot.src = items.get(properties.item).click_image
    div.appendChild(click_screenshoot);
  });

  timeline.on('itemout', function (properties) {
    logEvent('itemover', properties);
    div.removeChild(click_screenshoot);
  });

  function logEvent(event, properties) {
    var log = document.getElementById('log');
    var msg = document.createElement('div');
    msg.innerHTML = 'event=' + JSON.stringify(event) + ', ' +
        'properties=' + JSON.stringify(properties);
  }

  function loadData () {
    // get and deserialize the data
    var data = JSON.parse(txtData.value);

    // update the data in the DataSet
    //
    // Note: when retrieving updated data from a server instead of a complete
    // new set of data, one can simply update the existing data like:
    //
    //   items.update(data);
    //
    // Existing items will then be updated, and new items will be added.
    items.clear();
    items.add(data);

    // adjust the timeline window such that we see the loaded data
    timeline.fit();
  }
  btnLoad.onclick = loadData;

  function saveData() {
    // get the data from the DataSet
    //
    // Note that we specify the output type of the fields start and end
    // as "ISODate", which is safely serializable. Other serializable types
    // are "Number" (unix timestamp), "ASPDate" or "String" (without timezone!).
    //
    // Alternatively, it is possible to configure the DataSet to convert
    // the output automatically to ISODates like:
    //
    //   var options = {
    //     type: {start: 'ISODate', end: 'ISODate'}
    //   };
    //   var items = new vis.DataSet(options);
    //   // now items.get() will automatically convert start and end to ISO dates.
    //
    var data = items.get({
      type: {
        start: 'ISODate',
        end: 'ISODate'
      }
    });

    // serialize the data and put it in the textarea
    //txtData.value = JSON.stringify(data, null, 2);
  }
  btnSave.onclick = saveData;

  // load the initial data
  loadData();
  var bMove = true;
  var bBackwards = false;
  var multiplier = 1;
  var sign = 1;

  function move (percentage) {
      var range = timeline.getWindow();
      var interval = range.end - range.start;

      timeline.setWindow({
          start: range.start.valueOf() + percentage * sign * multiplier,
          end:   range.end.valueOf()   + percentage * sign * multiplier
      });
  }
  function setHoveredItem(id) {
       var hoveredItem = document.getElementById('hoveredItem');
       hoveredItem.innerHTML += '|' + id;
     }

     function toTimestamp(strDate){
      var datum = Date.parse(strDate);
      return datum/1000;
   }

  setInterval(function(){
          if (bMove){
          move(+1000);
          var range = timeline.getWindow();
          var start = range.start.valueOf()/1000;
          var end = range.end.valueOf()/1000;
          var positiveBalance = items.get({
            filter: function (item) {
              return (toTimestamp(item.start) > start);

            }
          });
          timeline.setSelection(String(positiveBalance[0].id), {focus: focus.checked});
          click_screenshoot.src = positiveBalance[0].click_image
          div.appendChild(click_screenshoot);
        }
  }, 1000);

  document.getElementById('Play').onclick  = function () { bMove = true;  };
  document.getElementById('Pause').onclick = function () { bMove = false; };
  document.getElementById('Backwards').onclick  = function () { sign = -1;};
  document.getElementById('Forwards').onclick = function () { sign = 1; };
  document.getElementById('x2').onclick  = function () { multiplier = 2;};
  document.getElementById('x4').onclick  = function () { multiplier = 4;};
  document.getElementById('x8').onclick  = function () { multiplier = 8;};
  document.getElementById('x16').onclick  = function () { multiplier = 16;};
  document.getElementById('x32').onclick  = function () { multiplier = 32;};
  document.getElementById('x64').onclick  = function () { multiplier = 64;};

</script>
</body>
</html>
